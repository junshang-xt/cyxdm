<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‘½è¿ä¹‹çˆ± - æˆ‘ä»¬çš„å‘½ä¸­æ³¨å®š</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #e8f5e8 0%, #e3f2fd 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }
        
        /* èƒŒæ™¯è£…é¥° */
        .bg-decoration {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.2;
        }
        
        .destiny-symbol {
            position: absolute;
            font-size: 2rem;
            animation: float 15s ease-in-out infinite;
            opacity: 0.6;
        }
        
        @keyframes float {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            50% {
                transform: translateY(-50px) rotate(180deg);
            }
        }
        
        /* ä¸»å®¹å™¨ */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* æ ‡é¢˜æ ·å¼ */
        .title-section {
            text-align: center;
            margin-bottom: 40px;
            padding-top: 30px;
        }
        
        .main-title {
            font-size: 3rem;
            color: #1565c0;
            text-shadow: 3px 3px 0px rgba(21, 101, 192, 0.2);
            margin-bottom: 10px;
            animation: pulse 2s infinite;
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #0d47a1;
            margin-bottom: 20px;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        /* å‘½è¿ä¹‹è½®åŒºåŸŸ */
        .destiny-wheel-section {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .section-title {
            font-size: 1.8rem;
            color: #1565c0;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .wheel-container {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 0 auto 30px;
            perspective: 1000px;
        }
        
        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: linear-gradient(135deg, #1976d2, #2196f3, #64b5f6, #90caf9);
            position: relative;
            transform-style: preserve-3d;
            transition: transform 3s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }
        
        .wheel-section {
            position: absolute;
            width: 100%;
            height: 50%;
            transform-origin: bottom;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.1rem;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
            clip-path: polygon(50% 0%, 100% 0%, 100% 100%, 50% 100%);
        }
        
        .wheel-arrow {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-top: 30px solid #ff6b81;
            z-index: 10;
        }
        
        .spin-button {
            background: linear-gradient(45deg, #ff6b81, #ff8e53);
            border: none;
            border-radius: 50px;
            padding: 15px 40px;
            color: white;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .spin-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }
        
        .spin-button:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }
        
        .wheel-result {
            margin-top: 20px;
            font-size: 1.2rem;
            color: #1565c0;
            font-weight: bold;
            min-height: 30px;
        }
        
        /* ç¼˜åˆ†æµ‹è¯•åŒºåŸŸ */
        .compatibility-section {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .test-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
            max-width: 600px;
            margin: 0 auto 30px;
        }
        
        .form-row {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .form-group {
            flex: 1;
            min-width: 200px;
        }
        
        .form-label {
            display: block;
            font-size: 1.1rem;
            color: #0d47a1;
            margin-bottom: 10px;
        }
        
        .form-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #1976d2;
        }
        
        .calculate-button {
            background: linear-gradient(45deg, #1976d2, #2196f3);
            border: none;
            border-radius: 50px;
            padding: 12px 30px;
            color: white;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 0 auto;
        }
        
        .calculate-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
        }
        
        .compatibility-result {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #e3f2fd 0%, #e8f5e8 100%);
            border-radius: 15px;
            margin-top: 30px;
            display: none;
        }
        
        .compatibility-score {
            font-size: 3rem;
            color: #1565c0;
            font-weight: bold;
            margin-bottom: 15px;
            animation: scoreAppear 1s ease-out;
        }
        
        @keyframes scoreAppear {
            from {
                transform: scale(0);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        .compatibility-message {
            font-size: 1.2rem;
            color: #0d47a1;
            line-height: 1.6;
        }
        
        /* çˆ±æƒ…èª“è¨€åŒºåŸŸ */
        .vows-section {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .vow-generator {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .generate-vow-button {
            background: linear-gradient(45deg, #4caf50, #81c784);
            border: none;
            border-radius: 50px;
            padding: 12px 30px;
            color: white;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .generate-vow-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
        }
        
        .vow-display {
            background: linear-gradient(135deg, #fffde7 0%, #fce4ec 100%);
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .vow-text {
            font-size: 1.4rem;
            color: #1565c0;
            line-height: 1.8;
            text-align: center;
            animation: vowAppear 1s ease-out;
        }
        
        @keyframes vowAppear {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .save-vow-button {
            background: linear-gradient(45deg, #ff9800, #ffb74d);
            border: none;
            border-radius: 50px;
            padding: 10px 25px;
            color: white;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }
        
        .save-vow-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
        }
        
        /* å‘½è¿ä¹‹æ¡¥æ¸¸æˆ */
        .bridge-game-section {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .game-instructions {
            text-align: center;
            color: #0d47a1;
            margin-bottom: 30px;
            font-size: 1.1rem;
        }
        
        .game-container {
            position: relative;
            height: 300px;
            background: linear-gradient(to bottom, #e3f2fd 0%, #bbdefb 100%);
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 20px;
        }
        
        .game-platform {
            position: absolute;
            background: linear-gradient(90deg, #795548, #a1887f);
            border-radius: 5px;
            transition: left 0.3s ease;
        }
        
        .game-character {
            position: absolute;
            width: 30px;
            height: 40px;
            background: linear-gradient(135deg, #ff5722, #ff9800);
            border-radius: 5px;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            transition: bottom 0.5s ease;
        }
        
        .game-target {
            position: absolute;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #e91e63, #f06292);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
        }
        
        .game-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        
        .game-button {
            background: linear-gradient(45deg, #1976d2, #2196f3);
            border: none;
            border-radius: 50px;
            padding: 10px 25px;
            color: white;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .game-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
        }
        
        .game-status {
            text-align: center;
            margin-top: 20px;
            font-size: 1.1rem;
            color: #0d47a1;
        }
        
        /* è¿”å›æŒ‰é’® */
        .back-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(45deg, #1976d2, #0d47a1);
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .back-button:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
        }
        
        /* æµªæ¼«ç‰¹æ•ˆ */
        .heart {
            position: fixed;
            top: -10%;
            transform: translateY(0);
            animation: fall linear forwards;
            z-index: 99;
            pointer-events: none;
        }
        
        @keyframes fall {
            to {
                transform: translateY(110vh) rotate(720deg);
            }
        }
        
        .sparkle {
            position: fixed;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255,255,255,1) 0%, rgba(255,255,255,0) 70%);
            pointer-events: none;
            animation: sparkle 1s ease-out forwards;
            z-index: 100;
        }
        
        @keyframes sparkle {
            0% {
                opacity: 1;
                transform: scale(0);
            }
            50% {
                opacity: 1;
                transform: scale(1);
            }
            100% {
                opacity: 0;
                transform: scale(1.5);
            }
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .main-title {
                font-size: 2rem;
            }
            
            .subtitle {
                font-size: 1rem;
            }
            
            .wheel-container {
                width: 250px;
                height: 250px;
            }
            
            .wheel-section {
                font-size: 1rem;
            }
            
            .compatibility-score {
                font-size: 2.5rem;
            }
            
            .vow-text {
                font-size: 1.2rem;
            }
            
            .game-container {
                height: 250px;
            }
            
            .back-button {
                bottom: 20px;
                right: 20px;
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }
        }
        
        @media (max-width: 480px) {
            .main-title {
                font-size: 1.8rem;
            }
            
            .wheel-container {
                width: 200px;
                height: 200px;
            }
            
            .wheel-section {
                font-size: 0.8rem;
            }
            
            .form-row {
                flex-direction: column;
            }
            
            .compatibility-score {
                font-size: 2rem;
            }
            
            .vow-text {
                font-size: 1.1rem;
            }
            
            .game-container {
                height: 200px;
            }
        }
    </style>
</head>
<body>
    <!-- èƒŒæ™¯è£…é¥° -->
    <div class="bg-decoration" id="destinySymbols">
        <!-- å‘½è¿ç¬¦å·å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
    </div>
    
    <!-- ä¸»å®¹å™¨ -->
    <div class="container">
        <!-- æ ‡é¢˜éƒ¨åˆ† -->
        <div class="title-section">
            <h1 class="main-title">å‘½è¿ä¹‹çˆ±</h1>
            <p class="subtitle">å‘½ä¸­æ³¨å®šï¼Œæˆ‘ä»¬ç›¸é‡åœ¨æ­¤åˆ»</p>
        </div>
        
        <!-- å‘½è¿ä¹‹è½®åŒºåŸŸ -->
        <div class="destiny-wheel-section">
            <h2 class="section-title">å‘½è¿ä¹‹è½®</h2>
            <div class="wheel-container">
                <div class="wheel" id="destinyWheel">
                    <!-- è½®å­æ‰‡å½¢åŒºåŸŸå°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
                <div class="wheel-arrow"></div>
            </div>
            <button class="spin-button" id="spinButton">è½¬åŠ¨å‘½è¿ä¹‹è½®</button>
            <div class="wheel-result" id="wheelResult">ç‚¹å‡»æŒ‰é’®è½¬åŠ¨å‘½è¿ä¹‹è½®ï¼Œæ­ç¤ºä½ çš„çˆ±æƒ…å‘½è¿</div>
        </div>
        
        <!-- ç¼˜åˆ†æµ‹è¯•åŒºåŸŸ -->
        <div class="compatibility-section">
            <h2 class="section-title">ç¼˜åˆ†æµ‹è¯•</h2>
            <form class="test-form" id="compatibilityTest">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="yourName">ä½ çš„åå­—</label>
                        <input type="text" class="form-input" id="yourName" placeholder="è¯·è¾“å…¥ä½ çš„åå­—" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="partnerName">TAçš„åå­—</label>
                        <input type="text" class="form-input" id="partnerName" placeholder="è¯·è¾“å…¥TAçš„åå­—" required>
                    </div>
                </div>
                <button type="submit" class="calculate-button">è®¡ç®—ç¼˜åˆ†æŒ‡æ•°</button>
            </form>
            <div class="compatibility-result" id="compatibilityResult">
                <div class="compatibility-score" id="compatibilityScore">0%</div>
                <div class="compatibility-message" id="compatibilityMessage"></div>
            </div>
        </div>
        
        <!-- çˆ±æƒ…èª“è¨€åŒºåŸŸ -->
        <div class="vows-section">
            <h2 class="section-title">çˆ±æƒ…èª“è¨€</h2>
            <div class="vow-generator">
                <button class="generate-vow-button" id="generateVowButton">ç”Ÿæˆä¸“å±èª“è¨€</button>
                <div class="vow-display" id="vowDisplay">
                    <div class="vow-text" id="vowText">ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®ï¼Œç”Ÿæˆä¸“å±äºä½ ä»¬çš„çˆ±æƒ…èª“è¨€...</div>
                </div>
                <button class="save-vow-button" id="saveVowButton" style="display: none;">ä¿å­˜èª“è¨€</button>
            </div>
        </div>
        
        <!-- å‘½è¿ä¹‹æ¡¥æ¸¸æˆ -->
        <div class="bridge-game-section">
            <h2 class="section-title">å‘½è¿ä¹‹æ¡¥</h2>
            <p class="game-instructions">å¸®åŠ©è§’è‰²è·¨è¶Šå‘½è¿ä¹‹æ¡¥ï¼Œåˆ°è¾¾çˆ±æƒ…çš„å½¼å²¸ï¼</p>
            <div class="game-container" id="gameContainer">
                <div class="game-character" id="gameCharacter"></div>
                <!-- æ¸¸æˆå¹³å°å’Œç›®æ ‡å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
            <div class="game-controls">
                <button class="game-button" id="startGameButton">å¼€å§‹æ¸¸æˆ</button>
                <button class="game-button" id="jumpButton" disabled>è·³è·ƒ</button>
                <button class="game-button" id="resetGameButton" disabled>é‡ç½®æ¸¸æˆ</button>
            </div>
            <div class="game-status" id="gameStatus">å‡†å¤‡å¼€å§‹æ¸¸æˆ...</div>
        </div>
    </div>
    
    <!-- è¿”å›æŒ‰é’® -->
    <button class="back-button" id="backButton">â†©</button>
    
    <script>
        // å…¨å±€å˜é‡
        let isSpinning = false;
        let gameStarted = false;
        let gameJumping = false;
        let gamePlatforms = [];
        let gameTarget = null;
        let compatibilityTested = false;
        
        // å‘½è¿ä¹‹è½®ç»“æœ
        const wheelResults = [
            "ç›¸è¯†æ˜¯ç¼˜",
            "ç›¸çŸ¥æ˜¯ç¦",
            "ç›¸æ‹æ˜¯å‘½",
            "ç›¸çˆ±æ˜¯å¹¸",
            "ç›¸æƒœæ˜¯çœŸ",
            "ç›¸ä¼´æ˜¯è¯º",
            "ç›¸æ¿¡ä»¥æ²«",
            "ç™½å¤´å•è€"
        ];
        
        // çˆ±æƒ…èª“è¨€æ¨¡æ¿
        const vowTemplates = [
            "åœ¨èŒ«èŒ«äººæµ·ä¸­ï¼Œé‡è§ä½ æ˜¯æˆ‘æœ€å¤§çš„å¹¸è¿ã€‚æ„¿æˆ‘ä»¬çš„çˆ±æƒ…å¦‚åŒç¹æ˜Ÿï¼Œæ°¸è¿œé—ªè€€åœ¨å½¼æ­¤çš„ç”Ÿå‘½ä¸­ã€‚",
            "ä»ç›¸é‡çš„é‚£ä¸€åˆ»èµ·ï¼Œæˆ‘å°±çŸ¥é“ä½ æ˜¯æˆ‘ä»Šç”Ÿçš„å”¯ä¸€ã€‚ä¸ç®¡é£é›¨å¦‚ä½•ï¼Œæˆ‘éƒ½ä¼šç‰µç€ä½ çš„æ‰‹ï¼Œä¸€èµ·èµ°è¿‡äººç”Ÿçš„æ¯ä¸€æ®µæ—…ç¨‹ã€‚",
            "çˆ±æƒ…ä¸æ˜¯è½°è½°çƒˆçƒˆçš„èª“è¨€ï¼Œè€Œæ˜¯å¹³å¹³æ·¡æ·¡çš„é™ªä¼´ã€‚æ„¿æˆ‘ä»¬åœ¨å¹³å‡¡çš„æ—¥å­é‡Œï¼Œæ„Ÿå—å½¼æ­¤çš„æ¸©æš–ï¼Œå…±åŒåˆ›é€ ç¾å¥½çš„å›å¿†ã€‚",
            "ä½ æ˜¯æˆ‘ç”Ÿå‘½ä¸­æœ€ç¾çš„é£æ™¯ï¼Œæ˜¯æˆ‘å¿ƒçµæ·±å¤„æœ€æŸ”è½¯çš„è§’è½ã€‚æˆ‘çˆ±ä½ ï¼Œä¸ä»…æ˜¯ä»Šå¤©ï¼Œè€Œæ˜¯ä½™ç”Ÿçš„æ¯ä¸€å¤©ã€‚",
            "æ„Ÿè°¢å‘½è¿è®©æˆ‘ä»¬ç›¸é‡ï¼Œæ„Ÿè°¢ä½ èµ°è¿›æˆ‘çš„ä¸–ç•Œã€‚æ„¿æˆ‘ä»¬çš„çˆ±æƒ…å¦‚åŒç¾é…’ï¼Œè¶Šé™ˆè¶Šé¦™ï¼Œæ°¸è¿œä¿æŒæœ€åˆçš„ç¾å¥½ã€‚",
            "åœ¨è¿™æ¼«é•¿çš„äººç”Ÿæ—…é€”ä¸­ï¼Œæœ‰ä½ çš„é™ªä¼´ï¼Œå†è‹¦å†ç´¯ä¹Ÿè§‰å¾—ç”œèœœã€‚æˆ‘ä¼šç”¨æˆ‘çš„ä¸€ç”Ÿï¼Œå»çˆ±ä½ ï¼Œä¿æŠ¤ä½ ï¼Œçæƒœä½ ã€‚",
            "çˆ±æƒ…æ˜¯ç›¸äº’åŒ…å®¹ï¼Œç›¸äº’ç†è§£ï¼Œç›¸äº’æ‰¶æŒã€‚æ„¿æˆ‘ä»¬åœ¨æœªæ¥çš„æ—¥å­é‡Œï¼Œå…±åŒæˆé•¿ï¼Œå…±åŒè¿›æ­¥ï¼Œä¸€èµ·åˆ›é€ å±äºæˆ‘ä»¬çš„å¹¸ç¦ã€‚",
            "ä½ æ˜¯æˆ‘ç”Ÿå‘½ä¸­çš„é˜³å…‰ï¼Œç…§äº®äº†æˆ‘çš„æ•´ä¸ªä¸–ç•Œã€‚æˆ‘çˆ±ä½ ï¼Œç›´åˆ°æ°¸è¿œã€‚"
        ];
        
        // DOM å…ƒç´ 
        const destinyWheel = document.getElementById('destinyWheel');
        const spinButton = document.getElementById('spinButton');
        const wheelResult = document.getElementById('wheelResult');
        const compatibilityTest = document.getElementById('compatibilityTest');
        const yourName = document.getElementById('yourName');
        const partnerName = document.getElementById('partnerName');
        const compatibilityResult = document.getElementById('compatibilityResult');
        const compatibilityScore = document.getElementById('compatibilityScore');
        const compatibilityMessage = document.getElementById('compatibilityMessage');
        const generateVowButton = document.getElementById('generateVowButton');
        const vowDisplay = document.getElementById('vowDisplay');
        const vowText = document.getElementById('vowText');
        const saveVowButton = document.getElementById('saveVowButton');
        const gameContainer = document.getElementById('gameContainer');
        const gameCharacter = document.getElementById('gameCharacter');
        const startGameButton = document.getElementById('startGameButton');
        const jumpButton = document.getElementById('jumpButton');
        const resetGameButton = document.getElementById('resetGameButton');
        const gameStatus = document.getElementById('gameStatus');
        const backButton = document.getElementById('backButton');
        const destinySymbols = document.getElementById('destinySymbols');
        
        // åˆå§‹åŒ–å‘½è¿ä¹‹è½®
        function initDestinyWheel() {
            const sectionCount = wheelResults.length;
            const anglePerSection = 360 / sectionCount;
            
            for (let i = 0; i < sectionCount; i++) {
                const section = document.createElement('div');
                section.classList.add('wheel-section');
                section.textContent = wheelResults[i];
                
                // è®¾ç½®è§’åº¦å’ŒèƒŒæ™¯è‰²
                const angle = i * anglePerSection;
                section.style.transform = `rotate(${angle}deg) skewY(${(90 - anglePerSection)}deg)`;
                
                // äº¤æ›¿é¢œè‰²
                const hue = 210 + (i * 30); // ä»è“è‰²å¼€å§‹
                const saturation = 70 + (i % 2) * 20;
                section.style.background = `hsl(${hue}, ${saturation}%, ${45 + (i % 3) * 10}%)`;
                
                destinyWheel.appendChild(section);
            }
        }
        
        // æ—‹è½¬å‘½è¿ä¹‹è½®
        function spinWheel() {
            if (isSpinning) return;
            
            isSpinning = true;
            spinButton.disabled = true;
            wheelResult.textContent = "å‘½è¿ä¹‹è½®æ­£åœ¨è½¬åŠ¨...";
            
            // éšæœºæ—‹è½¬è§’åº¦ï¼ˆ5-10åœˆåŠ ä¸Šéšæœºä½ç½®ï¼‰
            const randomSpins = Math.floor(Math.random() * 6) + 5;
            const targetIndex = Math.floor(Math.random() * wheelResults.length);
            const anglePerSection = 360 / wheelResults.length;
            const targetAngle = (randomSpins * 360) + (targetIndex * anglePerSection);
            
            // åº”ç”¨æ—‹è½¬
            destinyWheel.style.transform = `rotate(${targetAngle}deg)`;
            
            // æ—‹è½¬å®Œæˆåæ˜¾ç¤ºç»“æœ
            setTimeout(() => {
                isSpinning = false;
                spinButton.disabled = false;
                wheelResult.textContent = `ä½ ä»¬çš„å‘½è¿æ˜¯ï¼š${wheelResults[targetIndex]}`;
                
                // åˆ›å»ºçˆ±å¿ƒé›¨æ•ˆæœ
                createHeartRain(10);
                
                // åˆ›å»ºé—ªå…‰æ•ˆæœ
                createSparkle(event.clientX, event.clientY);
            }, 3000);
        }
        
        // è®¡ç®—ç¼˜åˆ†æŒ‡æ•°
        function calculateCompatibility(event) {
            event.preventDefault();
            
            const your = yourName.value.trim();
            const partner = partnerName.value.trim();
            
            if (!your || !partner) return;
            
            // ä½¿ç”¨åå­—çš„å­—ç¬¦ç è®¡ç®—ç¼˜åˆ†æŒ‡æ•°
            let sum = 0;
            for (let i = 0; i < your.length; i++) {
                sum += your.charCodeAt(i);
            }
            for (let i = 0; i < partner.length; i++) {
                sum += partner.charCodeAt(i);
            }
            
            // ç”Ÿæˆ70-99ä¹‹é—´çš„ç¼˜åˆ†æŒ‡æ•°
            const score = 70 + (sum % 30);
            
            // æ˜¾ç¤ºç»“æœ
            compatibilityScore.textContent = `${score}%`;
            compatibilityMessage.textContent = getCompatibilityMessage(score);
            compatibilityResult.style.display = 'block';
            
            // æ»šåŠ¨åˆ°ç»“æœåŒºåŸŸ
            compatibilityResult.scrollIntoView({ behavior: 'smooth', block: 'center' });
            
            // åˆ›å»ºçˆ±å¿ƒé›¨æ•ˆæœ
            createHeartRain(15);
            
            // æ ‡è®°ä¸ºå·²æµ‹è¯•
            compatibilityTested = true;
        }
        
        // è·å–ç¼˜åˆ†æŒ‡æ•°å¯¹åº”çš„æ¶ˆæ¯
        function getCompatibilityMessage(score) {
            if (score >= 95) {
                return "ä½ ä»¬ç®€ç›´æ˜¯å¤©ä½œä¹‹åˆï¼å‘½ä¸­æ³¨å®šè¦åœ¨ä¸€èµ·ï¼Œæ— è®ºé‡åˆ°ä»€ä¹ˆå›°éš¾ï¼Œä½ ä»¬éƒ½ä¼šæºæ‰‹åº¦è¿‡ã€‚";
            } else if (score >= 85) {
                return "ä½ ä»¬çš„ç¼˜åˆ†éå¸¸æ·±åšï¼å½¼æ­¤ä¹‹é—´æœ‰ç€å¼ºçƒˆçš„é»˜å¥‘å’Œå¸å¼•åŠ›ï¼Œæ˜¯ä»¤äººç¾¡æ…•çš„ä¸€å¯¹ã€‚";
            } else if (score >= 75) {
                return "ä½ ä»¬çš„ç¼˜åˆ†ä¸é”™ï¼è™½ç„¶å¶å°”ä¼šæœ‰å°æ‘©æ“¦ï¼Œä½†å½¼æ­¤åŒ…å®¹å’Œç†è§£ä¼šè®©ä½ ä»¬çš„æ„Ÿæƒ…æ›´åŠ ç‰¢å›ºã€‚";
            } else {
                return "ä½ ä»¬éœ€è¦æ›´å¤šçš„æ—¶é—´å’Œè€å¿ƒå»äº†è§£å½¼æ­¤ã€‚é€šè¿‡å…±åŒçš„åŠªåŠ›å’Œç»è¥ï¼Œä½ ä»¬çš„æ„Ÿæƒ…ä¼šè¶Šæ¥è¶Šå¥½ã€‚";
            }
        }
        
        // ç”Ÿæˆçˆ±æƒ…èª“è¨€
        function generateVow() {
            const randomIndex = Math.floor(Math.random() * vowTemplates.length);
            const vow = vowTemplates[randomIndex];
            
            // å¦‚æœå·²ç»æµ‹è¯•è¿‡ç¼˜åˆ†ï¼Œå¯ä»¥æ ¹æ®åå­—å®šåˆ¶èª“è¨€
            let customizedVow = vow;
            if (compatibilityTested && yourName.value && partnerName.value) {
                customizedVow = vow.replace(/ä½ /g, partnerName.value);
                customizedVow = customizedVow.replace(/æˆ‘/g, yourName.value);
            }
            
            // æ˜¾ç¤ºèª“è¨€
            vowText.textContent = customizedVow;
            
            // æ˜¾ç¤ºä¿å­˜æŒ‰é’®
            saveVowButton.style.display = 'inline-block';
            
            // åˆ›å»ºçˆ±å¿ƒé›¨æ•ˆæœ
            createHeartRain(8);
        }
        
        // ä¿å­˜çˆ±æƒ…èª“è¨€
        function saveVow() {
            const vow = vowText.textContent;
            
            // åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡æœ¬åŒºåŸŸ
            const textArea = document.createElement('textarea');
            textArea.value = vow;
            document.body.appendChild(textArea);
            
            // é€‰æ‹©å¹¶å¤åˆ¶æ–‡æœ¬
            textArea.select();
            document.execCommand('copy');
            
            // ç§»é™¤ä¸´æ—¶æ–‡æœ¬åŒºåŸŸ
            document.body.removeChild(textArea);
            
            // æ˜¾ç¤ºä¿å­˜æˆåŠŸæ¶ˆæ¯
            alert('èª“è¨€å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œå¯ä»¥åˆ†äº«ç»™ä½ çš„çˆ±äººï¼');
            
            // åˆ›å»ºé—ªå…‰æ•ˆæœ
            createSparkle(event.clientX, event.clientY);
        }
        
        // å¼€å§‹æ¸¸æˆ
        function startGame() {
            if (gameStarted) return;
            
            gameStarted = true;
            startGameButton.disabled = true;
            jumpButton.disabled = false;
            resetGameButton.disabled = false;
            gameStatus.textContent = "æ¸¸æˆå¼€å§‹ï¼å¸®åŠ©è§’è‰²åˆ°è¾¾çˆ±å¿ƒçš„ä½ç½®ã€‚";
            
            // åˆ›å»ºæ¸¸æˆå¹³å°
            createGamePlatforms();
            
            // åˆ›å»ºç›®æ ‡
            createGameTarget();
            
            // å¼€å§‹æ¸¸æˆå¾ªç¯
            gameLoop();
        }
        
        // åˆ›å»ºæ¸¸æˆå¹³å°
        function createGamePlatforms() {
            const containerWidth = gameContainer.offsetWidth;
            const containerHeight = gameContainer.offsetHeight;
            
            // æ¸…é™¤ç°æœ‰å¹³å°
            gamePlatforms.forEach(platform => gameContainer.removeChild(platform));
            gamePlatforms = [];
            
            // åˆ›å»ºèµ·å§‹å¹³å°
            const startPlatform = createPlatform(50, containerHeight - 60, 100, 20);
            gameContainer.appendChild(startPlatform);
            gamePlatforms.push(startPlatform);
            
            // åˆ›å»ºä¸­é—´å¹³å°
            let lastX = 100;
            let lastY = containerHeight - 60;
            
            for (let i = 0; i < 4; i++) {
                const width = Math.floor(Math.random() * 40) + 60;
                const height = 20;
                const x = lastX + Math.floor(Math.random() * 100) + 80;
                const y = lastY - Math.floor(Math.random() * 60) - 40;
                
                if (x < containerWidth - width && y > 50) {
                    const platform = createPlatform(x, y, width, height);
                    gameContainer.appendChild(platform);
                    gamePlatforms.push(platform);
                    
                    lastX = x;
                    lastY = y;
                }
            }
        }
        
        // åˆ›å»ºå¹³å°å…ƒç´ 
        function createPlatform(x, y, width, height) {
            const platform = document.createElement('div');
            platform.classList.add('game-platform');
            platform.style.width = `${width}px`;
            platform.style.height = `${height}px`;
            platform.style.left = `${x}px`;
            platform.style.bottom = `${y}px`;
            
            return platform;
        }
        
        // åˆ›å»ºæ¸¸æˆç›®æ ‡
        function createGameTarget() {
            if (gameTarget) {
                gameContainer.removeChild(gameTarget);
            }
            
            const containerWidth = gameContainer.offsetWidth;
            const containerHeight = gameContainer.offsetHeight;
            
            // åˆ›å»ºç›®æ ‡
            gameTarget = document.createElement('div');
            gameTarget.classList.add('game-target');
            gameTarget.textContent = 'â¤ï¸';
            gameTarget.style.bottom = '30px';
            gameTarget.style.right = '50px';
            
            gameContainer.appendChild(gameTarget);
        }
        
        // è§’è‰²è·³è·ƒ
        function jump() {
            if (!gameStarted || gameJumping) return;
            
            gameJumping = true;
            
            // è®°å½•åˆå§‹ä½ç½®
            const initialBottom = parseInt(gameCharacter.style.bottom) || 20;
            
            // è·³è·ƒä¸Šå‡
            let currentHeight = initialBottom;
            const jumpInterval = setInterval(() => {
                currentHeight += 5;
                gameCharacter.style.bottom = `${currentHeight}px`;
                
                // åˆ°è¾¾æœ€é«˜ç‚¹åä¸‹è½
                if (currentHeight >= initialBottom + 100) {
                    clearInterval(jumpInterval);
                    fall(initialBottom);
                }
                
                // æ£€æŸ¥æ˜¯å¦è½åœ¨å¹³å°ä¸Š
                checkPlatformCollision(currentHeight);
                
                // æ£€æŸ¥æ˜¯å¦åˆ°è¾¾ç›®æ ‡
                checkTargetCollision();
            }, 20);
        }
        
        // è§’è‰²ä¸‹è½
        function fall(initialBottom) {
            const fallInterval = setInterval(() => {
                let currentBottom = parseInt(gameCharacter.style.bottom) || 20;
                currentBottom -= 3;
                gameCharacter.style.bottom = `${currentBottom}px`;
                
                // æ£€æŸ¥æ˜¯å¦è½åœ¨å¹³å°ä¸Š
                if (checkPlatformCollision(currentBottom)) {
                    clearInterval(fallInterval);
                    gameJumping = false;
                    return;
                }
                
                // æ£€æŸ¥æ˜¯å¦åˆ°è¾¾ç›®æ ‡
                checkTargetCollision();
                
                // æ£€æŸ¥æ˜¯å¦è½åœ°ï¼ˆæ¸¸æˆå¤±è´¥ï¼‰
                if (currentBottom <= 0) {
                    clearInterval(fallInterval);
                    gameJumping = false;
                    gameOver();
                }
            }, 15);
        }
        
        // æ£€æŸ¥å¹³å°ç¢°æ’
        function checkPlatformCollision(characterBottom) {
            const characterRect = gameCharacter.getBoundingClientRect();
            
            for (const platform of gamePlatforms) {
                const platformRect = platform.getBoundingClientRect();
                
                // ç®€å•çš„ç¢°æ’æ£€æµ‹
                if (characterRect.right > platformRect.left + 10 && 
                    characterRect.left < platformRect.right - 10 && 
                    Math.abs(characterBottom - (gameContainer.offsetHeight - platformRect.top)) < 10) {
                    
                    // è½åœ¨å¹³å°ä¸Š
                    gameCharacter.style.bottom = `${gameContainer.offsetHeight - platformRect.top}px`;
                    return true;
                }
            }
            
            return false;
        }
        
        // æ£€æŸ¥ç›®æ ‡ç¢°æ’
        function checkTargetCollision() {
            if (!gameTarget) return;
            
            const characterRect = gameCharacter.getBoundingClientRect();
            const targetRect = gameTarget.getBoundingClientRect();
            
            // ç®€å•çš„ç¢°æ’æ£€æµ‹
            if (characterRect.right > targetRect.left && 
                characterRect.left < targetRect.right && 
                characterRect.bottom > targetRect.top && 
                characterRect.top < targetRect.bottom) {
                
                // æ¸¸æˆèƒœåˆ©
                gameWin();
            }
        }
        
        // æ¸¸æˆä¸»å¾ªç¯
        function gameLoop() {
            if (!gameStarted) return;
            
            // ç¼“æ…¢ç§»åŠ¨å¹³å°ï¼ˆåˆ›é€ åŠ¨æ€æ•ˆæœï¼‰
            gamePlatforms.forEach(platform => {
                const currentLeft = parseInt(platform.style.left);
                const newLeft = currentLeft - 1;
                
                if (newLeft < -platform.offsetWidth) {
                    // å¹³å°ç§»å‡ºå±å¹•ï¼Œé‡æ–°æ”¾ç½®åˆ°å³ä¾§
                    platform.style.left = `${gameContainer.offsetWidth}px`;
                } else {
                    platform.style.left = `${newLeft}px`;
                }
            });
            
            // ç»§ç»­æ¸¸æˆå¾ªç¯
            requestAnimationFrame(gameLoop);
        }
        
        // æ¸¸æˆèƒœåˆ©
        function gameWin() {
            gameStarted = false;
            jumpButton.disabled = true;
            gameStatus.textContent = "æ­å–œä½ ï¼æˆåŠŸåˆ°è¾¾çˆ±æƒ…çš„å½¼å²¸ï¼";
            
            // åˆ›å»ºçˆ±å¿ƒé›¨æ•ˆæœ
            createHeartRain(30);
            
            // æ˜¾ç¤ºåº†ç¥æ¶ˆæ¯
            alert('æ­å–œï¼ä½ ä»¬çš„çˆ±æƒ…è·¨è¶Šäº†å‘½è¿ä¹‹æ¡¥ï¼Œæ³¨å®šè¦åœ¨ä¸€èµ·ï¼');
        }
        
        // æ¸¸æˆå¤±è´¥
        function gameOver() {
            gameStarted = false;
            jumpButton.disabled = true;
            gameStatus.textContent = "æ¸¸æˆå¤±è´¥ï¼å†è¯•ä¸€æ¬¡å§ã€‚";
        }
        
        // é‡ç½®æ¸¸æˆ
        function resetGame() {
            gameStarted = false;
            gameJumping = false;
            
            // é‡ç½®è§’è‰²ä½ç½®
            gameCharacter.style.bottom = '20px';
            
            // é‡ç½®æŒ‰é’®çŠ¶æ€
            startGameButton.disabled = false;
            jumpButton.disabled = true;
            resetGameButton.disabled = true;
            
            // é‡ç½®çŠ¶æ€æ¶ˆæ¯
            gameStatus.textContent = "å‡†å¤‡å¼€å§‹æ¸¸æˆ...";
            
            // æ¸…é™¤æ¸¸æˆå…ƒç´ 
            gamePlatforms.forEach(platform => gameContainer.removeChild(platform));
            gamePlatforms = [];
            
            if (gameTarget) {
                gameContainer.removeChild(gameTarget);
                gameTarget = null;
            }
        }
        
        // åˆ›å»ºçˆ±å¿ƒé›¨æ•ˆæœ
        function createHeartRain(count) {
            for (let i = 0; i < count; i++) {
                const heart = document.createElement('div');
                heart.classList.add('heart');
                
                // éšæœºå¤§å°
                const size = Math.random() * 20 + 10;
                heart.style.fontSize = `${size}px`;
                
                // éšæœºä½ç½®
                heart.style.left = `${Math.random() * 100}vw`;
                
                // éšæœºé¢œè‰²
                const colors = ['#1976d2', '#ff6b81', '#4caf50', '#ff9800', '#9c27b0'];
                heart.style.color = colors[Math.floor(Math.random() * colors.length)];
                
                // éšæœºå»¶è¿Ÿå’ŒæŒç»­æ—¶é—´
                const delay = Math.random() * 5;
                const duration = Math.random() * 10 + 5;
                heart.style.animationDelay = `${delay}s`;
                heart.style.animationDuration = `${duration}s`;
                
                // çˆ±å¿ƒç¬¦å·
                heart.textContent = 'â¤ï¸';
                
                document.body.appendChild(heart);
                
                // ç§»é™¤å…ƒç´ 
                setTimeout(() => {
                    document.body.removeChild(heart);
                }, (delay + duration) * 1000);
            }
        }
        
        // åˆ›å»ºé—ªå…‰æ•ˆæœ
        function createSparkle(x, y) {
            const sparkle = document.createElement('div');
            sparkle.classList.add('sparkle');
            
            // è®¾ç½®å¤§å°å’Œä½ç½®
            const size = Math.random() * 100 + 50;
            sparkle.style.width = `${size}px`;
            sparkle.style.height = `${size}px`;
            sparkle.style.left = `${x - size / 2}px`;
            sparkle.style.top = `${y - size / 2}px`;
            
            document.body.appendChild(sparkle);
            
            // ç§»é™¤å…ƒç´ 
            setTimeout(() => {
                document.body.removeChild(sparkle);
            }, 1000);
        }
        
        // åˆ›å»ºå‘½è¿ç¬¦å·èƒŒæ™¯
        function createDestinySymbols() {
            const symbols = ['âœ¨', 'ğŸ’«', 'ğŸŒŸ', 'â­', 'ğŸ’–', 'â¤ï¸'];
            
            for (let i = 0; i < 20; i++) {
                const symbol = document.createElement('div');
                symbol.classList.add('destiny-symbol');
                symbol.textContent = symbols[Math.floor(Math.random() * symbols.length)];
                
                // éšæœºä½ç½®
                symbol.style.left = `${Math.random() * 100}vw`;
                symbol.style.top = `${Math.random() * 100}vh`;
                
                // éšæœºå»¶è¿Ÿå’ŒæŒç»­æ—¶é—´
                symbol.style.animationDelay = `${Math.random() * 10}s`;
                symbol.style.animationDuration = `${Math.random() * 20 + 15}s`;
                
                destinySymbols.appendChild(symbol);
            }
        }
        
        // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬å™¨
        function initEventListeners() {
            // å‘½è¿ä¹‹è½®
            spinButton.addEventListener('click', spinWheel);
            
            // ç¼˜åˆ†æµ‹è¯•
            compatibilityTest.addEventListener('submit', calculateCompatibility);
            
            // çˆ±æƒ…èª“è¨€
            generateVowButton.addEventListener('click', generateVow);
            saveVowButton.addEventListener('click', saveVow);
            
            // å‘½è¿ä¹‹æ¡¥æ¸¸æˆ
            startGameButton.addEventListener('click', startGame);
            jumpButton.addEventListener('click', jump);
            resetGameButton.addEventListener('click', resetGame);
            
            // è¿”å›æŒ‰é’®
            backButton.addEventListener('click', () => {
                window.location.href = 'page1.html';
            });
            
            // é”®ç›˜æ§åˆ¶æ¸¸æˆ
            document.addEventListener('keydown', (e) => {
                if (e.code === 'Space') {
                    jump();
                }
            });
        }
        
        // åˆå§‹åŒ–åº”ç”¨
        function initApp() {
            initDestinyWheel();
            initEventListeners();
            createDestinySymbols();
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>